<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16-Machine VFD HMI Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #121230 100%);
            min-height: 100vh;
            color: #fff;
            overflow: hidden;
        }

        /* Main Container */
        .hmi-container {
            width: 100vw;
            height: 100vh;
            padding: 10px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .dashboard-header {
            text-align: center;
            padding: 10px 0;
            border-bottom: 3px solid #00a8ff;
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .dashboard-title {
            font-size: 2.2rem;
            color: #00a8ff;
            text-shadow: 0 0 15px rgba(0, 168, 255, 0.7);
            letter-spacing: 1px;
        }

        .dashboard-subtitle {
            font-size: 0.9rem;
            color: #70e1ff;
            margin-top: 3px;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            overflow: hidden;
            position: relative;
            height: calc(100vh - 160px);
            margin-bottom: 5px;
        }

        /* Machine Grid */
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.4s ease;
            display: flex;
            flex-direction: column;
        }

        .page.hidden {
            transform: translateX(100%);
            display: none;
        }

        .page.active {
            transform: translateX(0);
            display: flex;
        }

        .machines-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 8px;
            flex: 1;
            min-height: 0;
            padding: 0 5px;
        }

        /* Machine Card */
        .machine-card {
            background: rgba(20, 25, 45, 0.95);
            border-radius: 8px;
            padding: 8px;
            border: 2px solid #00a8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 0;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 150, 255, 0.2);
        }

        .machine-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 168, 255, 0.4);
        }

        /* Machine Header */
        .machine-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 5px;
            padding-bottom: 3px;
            border-bottom: 1px solid #2a3b5d;
            flex-shrink: 0;
        }

        .machine-id {
            font-size: 1.1rem;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 5px rgba(0, 255, 136, 0.5);
        }

        .machine-status {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .status-active {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .status-inactive {
            background: rgba(255, 51, 51, 0.2);
            color: #ff5555;
            border: 1px solid #ff5555;
        }

        /* Power Button */
        .power-container {
            margin: 3px 0;
            flex-shrink: 0;
        }

        .power-switch {
            width: 55px;
            height: 55px;
            border: none;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
        }

        .power-switch.off {
            background: linear-gradient(145deg, #ff3333, #cc0000);
            color: white;
        }

        .power-switch.on {
            background: linear-gradient(145deg, #00ff44, #00aa22);
            color: white;
        }

        /* Value Display */
        .value-display {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            color: #ffaa00;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px 8px;
            border-radius: 5px;
            letter-spacing: 2px;
            text-align: center;
            margin: 3px 0;
            border: 1px solid #ffaa00;
            min-width: 110px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            text-shadow: 0 0 5px rgba(255, 170, 0, 0.7);
        }

        /* Control Buttons */
        .machine-controls {
            display: flex;
            gap: 5px;
            margin-top: 3px;
            width: 100%;
            justify-content: center;
            flex-shrink: 0;
        }

        .control-btn {
            padding: 4px 8px;
            font-size: 0.8rem;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 45px;
            text-transform: uppercase;
        }

        .control-btn.set {
            background: linear-gradient(145deg, #ffaa00, #cc8800);
            color: #000;
        }

        .control-btn.reset {
            background: linear-gradient(145deg, #ff5555, #cc0000);
            color: white;
        }

        /* Pagination Controls */
        .pagination-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 15px;
            background: rgba(20, 30, 50, 0.9);
            border-radius: 8px;
            margin-bottom: 5px;
            border: 2px solid #00a8ff;
            flex-shrink: 0;
        }

        .page-nav-btn {
            background: rgba(0, 168, 255, 0.2);
            border: 2px solid #00a8ff;
            color: #00a8ff;
            width: 40px;
            height: 40px;
            border-radius: 6px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .page-nav-btn:hover {
            background: rgba(0, 168, 255, 0.4);
        }

        .page-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-info {
            font-size: 1rem;
            color: #70e1ff;
            font-weight: bold;
            text-align: center;
            min-width: 80px;
        }

        .global-controls {
            display: flex;
            gap: 8px;
        }

        .global-btn {
            padding: 8px 12px;
            font-size: 0.9rem;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 90px;
        }

        .global-start {
            background: linear-gradient(145deg, #00cc44, #009933);
            color: white;
        }

        .global-stop {
            background: linear-gradient(145deg, #ff3333, #cc0000);
            color: white;
        }

        .global-reset {
            background: linear-gradient(145deg, #6666ff, #3333cc);
            color: white;
        }

        .global-btn:hover {
            transform: scale(1.03);
        }

        /* Status Bar */
        .status-bar {
            background: rgba(10, 15, 30, 0.95);
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 2px solid #00a8ff;
            flex-shrink: 0;
        }

        .system-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff88;
            box-shadow: 0 0 5px #00ff88;
        }

        .status-text {
            font-size: 0.85rem;
            color: #70e1ff;
        }

        .datetime {
            font-size: 0.85rem;
            color: #ffaa00;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #00a8ff;
            width: 380px;
            text-align: center;
        }

        .modal-title {
            color: #00a8ff;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .modal-input-container {
            margin: 10px 0;
        }

        .modal-label {
            color: #70e1ff;
            font-size: 0.9rem;
            margin-bottom: 5px;
            display: block;
        }

        .modal-input {
            font-size: 1.8rem;
            font-family: 'Courier New', monospace;
            color: #00ff88;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff88;
            border-radius: 5px;
            padding: 5px;
            text-align: center;
            letter-spacing: 4px;
            width: 100%;
            outline: none;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .modal-btn {
            padding: 8px 15px;
            font-size: 0.9rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 70px;
        }

        .modal-save {
            background: #00a8ff;
            color: white;
        }

        .modal-cancel {
            background: #666;
            color: white;
        }

        /* Responsive Adjustments */
        @media (max-width: 1400px) {
            .machines-grid {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(3, 1fr);
            }
        }

        @media (max-width: 1100px) {
            .machines-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .machines-grid {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(8, 1fr);
            }
            
            .machine-card {
                padding: 6px;
            }
            
            .value-display {
                font-size: 1.1rem;
                min-width: 90px;
                height: 35px;
            }
            
            .power-switch {
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <div class="hmi-container">
        <!-- Header -->
        <header class="dashboard-header">
            <h1 class="dashboard-title">VFD CONTROL PANEL</h1>
            <div class="dashboard-subtitle">16 MACHINES • YASKAWA A1000 • INDUSTRIAL HMI</div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Page 1 (Machines 1-8) -->
            <div class="page active" id="page1">
                <div class="machines-grid" id="machinesGrid1"></div>
            </div>

            <!-- Page 2 (Machines 9-16) -->
            <div class="page hidden" id="page2">
                <div class="machines-grid" id="machinesGrid2"></div>
            </div>
        </div>

        <!-- Pagination Controls -->
        <div class="pagination-container">
            <button class="page-nav-btn" id="prevPageBtn" disabled>◄</button>
            
            <div class="page-info">
                <span id="currentPage">PAGE 1</span> / <span id="totalPages">2</span>
            </div>
            
            <div class="global-controls">
                <button class="global-btn global-start" id="globalStart">START ALL</button>
                <button class="global-btn global-stop" id="globalStop">STOP ALL</button>
                <button class="global-btn global-reset" id="globalReset">RESET ALL</button>
            </div>
            
            <button class="page-nav-btn" id="nextPageBtn">►</button>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="system-status">
                <div class="status-indicator"></div>
                <div class="status-text" id="globalStatus">SYSTEM READY • 0 ACTIVE • 0 RUNNING</div>
            </div>
            <div class="datetime" id="datetime"></div>
        </div>
    </div>

    <!-- Modal for Setting Values -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <h2 class="modal-title">SET VALUE</h2>
            <div class="modal-input-container">
                <label class="modal-label" id="modalMachineLabel">Machine CH01</label>
                <input type="text" class="modal-input" id="modalInput" value="880F" maxlength="4">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-save" id="modalSave">SAVE</button>
                <button class="modal-btn modal-cancel" id="modalCancel">CANCEL</button>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const TOTAL_MACHINES = 16;
        const MACHINES_PER_PAGE = 8;
        const TOTAL_PAGES = Math.ceil(TOTAL_MACHINES / MACHINES_PER_PAGE);

        // Initialize machines data
        const machines = Array(TOTAL_MACHINES).fill().map((_, i) => ({
            id: i + 1,
            name: `CH${String(i + 1).padStart(2, '0')}`,
            isOn: false,
            value: "880F",
            isRunning: false,
            page: Math.floor(i / MACHINES_PER_PAGE) + 1
        }));

        // State variables
        let currentPage = 1;
        let currentEditingMachine = null;

        // DOM Elements
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const machinesGrid1 = document.getElementById('machinesGrid1');
        const machinesGrid2 = document.getElementById('machinesGrid2');
        const currentPageSpan = document.getElementById('currentPage');
        const totalPagesSpan = document.getElementById('totalPages');
        const prevPageBtn = document.getElementById('prevPageBtn');
        const nextPageBtn = document.getElementById('nextPageBtn');
        const globalStatus = document.getElementById('globalStatus');
        const datetimeElement = document.getElementById('datetime');
        const settingsModal = document.getElementById('settingsModal');
        const modalInput = document.getElementById('modalInput');
        const modalSave = document.getElementById('modalSave');
        const modalCancel = document.getElementById('modalCancel');
        const modalMachineLabel = document.getElementById('modalMachineLabel');
        const globalStart = document.getElementById('globalStart');
        const globalStop = document.getElementById('globalStop');
        const globalReset = document.getElementById('globalReset');

        // Utility functions
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            const timeStr = now.toLocaleTimeString('en-US', { 
                hour12: true, 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            });
            datetimeElement.textContent = `${dateStr} • ${timeStr}`;
        }

        function formatDisplayValue(value) {
            return value.split('').join(' ');
        }

        function updateGlobalStatus() {
            const activeMachines = machines.filter(m => m.isOn).length;
            const runningMachines = machines.filter(m => m.isRunning).length;
            globalStatus.textContent = `${activeMachines} ACTIVE • ${runningMachines} RUNNING • ${TOTAL_MACHINES} TOTAL`;
        }

        function updatePaginationButtons() {
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === TOTAL_PAGES;
            currentPageSpan.textContent = `PAGE ${currentPage}`;
            totalPagesSpan.textContent = TOTAL_PAGES;
        }

        function switchPage(pageNumber) {
            if (pageNumber < 1 || pageNumber > TOTAL_PAGES) return;
            
            currentPage = pageNumber;
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                page.classList.add('hidden');
            });
            
            // Show current page
            const currentPageElement = document.getElementById(`page${currentPage}`);
            if (currentPageElement) {
                currentPageElement.classList.remove('hidden');
                currentPageElement.classList.add('active');
            }
            
            updatePaginationButtons();
        }

        function createMachineCard(machine) {
            return `
                <div class="machine-card" data-machine-id="${machine.id}">
                    <div class="machine-header">
                        <div class="machine-id">${machine.name}</div>
                        <div class="machine-status ${machine.isOn ? 'status-active' : 'status-inactive'}">
                            ${machine.isOn ? 'ON' : 'OFF'}
                        </div>
                    </div>
                    
                    <div class="power-container">
                        <button class="power-switch ${machine.isOn ? 'on' : 'off'}" 
                                data-action="toggle-power" 
                                data-machine="${machine.id}">
                            ${machine.isOn ? 'ON' : 'OFF'}
                        </button>
                    </div>
                    
                    <div class="value-display" id="display${machine.id}">
                        ${formatDisplayValue(machine.value)}
                    </div>
                    
                    <div class="machine-controls">
                        <button class="control-btn set" 
                                data-action="set-value" 
                                data-machine="${machine.id}">
                            SET
                        </button>
                        <button class="control-btn reset" 
                                data-action="reset" 
                                data-machine="${machine.id}">
                            RESET
                        </button>
                    </div>
                </div>
            `;
        }

        function renderMachines() {
            // Clear grids
            machinesGrid1.innerHTML = '';
            machinesGrid2.innerHTML = '';
            
            // Render machines to their respective pages
            machines.forEach(machine => {
                const cardHTML = createMachineCard(machine);
                if (machine.page === 1) {
                    machinesGrid1.innerHTML += cardHTML;
                } else {
                    machinesGrid2.innerHTML += cardHTML;
                }
            });
            
            updateGlobalStatus();
        }

        function getMachineById(id) {
            return machines.find(m => m.id === id);
        }

        function toggleMachinePower(machineId) {
            const machine = getMachineById(machineId);
            if (!machine) return;
            
            machine.isOn = !machine.isOn;
            
            if (!machine.isOn) {
                machine.isRunning = false;
            }
            
            renderMachines();
        }

        function openSetModal(machineId) {
            const machine = getMachineById(machineId);
            if (!machine) return;
            
            if (!machine.isOn) {
                alert(`Please turn ON ${machine.name} first!`);
                return;
            }
            
            currentEditingMachine = machineId;
            modalMachineLabel.textContent = `Machine ${machine.name}`;
            modalInput.value = machine.value;
            settingsModal.style.display = 'flex';
            modalInput.focus();
            modalInput.select();
        }

        function resetMachine(machineId) {
            const machine = getMachineById(machineId);
            if (!machine || !machine.isOn) return;
            
            machine.value = "880F";
            renderMachines();
            
            // Visual feedback
            const display = document.getElementById(`display${machineId}`);
            if (display) {
                display.style.color = "#ff5555";
                setTimeout(() => {
                    display.style.color = "#ffaa00";
                }, 300);
            }
        }

        function startMachineSimulation(machineId) {
            const machine = getMachineById(machineId);
            if (!machine || !machine.isOn) return;
            
            machine.isRunning = true;
            
            const simulate = () => {
                if (!machine.isRunning) return;
                
                // Generate random hex value
                const randomHex = Math.floor(Math.random() * 65535)
                    .toString(16)
                    .toUpperCase()
                    .padStart(4, '0');
                
                machine.value = randomHex;
                const display = document.getElementById(`display${machineId}`);
                if (display) {
                    display.textContent = formatDisplayValue(randomHex);
                }
                
                setTimeout(simulate, 2000);
            };
            
            simulate();
        }

        function stopMachineSimulation(machineId) {
            const machine = getMachineById(machineId);
            if (machine) {
                machine.isRunning = false;
            }
        }

        function setupMachineEventDelegation(gridElement) {
            if (!gridElement) return;
            
            gridElement.addEventListener('click', (e) => {
                const machineId = parseInt(e.target.dataset.machine);
                const action = e.target.dataset.action;
                
                if (!machineId || !action) return;
                
                switch(action) {
                    case 'toggle-power':
                        toggleMachinePower(machineId);
                        break;
                        
                    case 'set-value':
                        openSetModal(machineId);
                        break;
                        
                    case 'reset':
                        resetMachine(machineId);
                        break;
                }
            });
        }

        // Event Listeners
        modalSave.addEventListener('click', () => {
            const newValue = modalInput.value.toUpperCase();
            
            if (/^[0-9A-F]{4}$/.test(newValue) && currentEditingMachine) {
                const machine = getMachineById(currentEditingMachine);
                if (machine) {
                    machine.value = newValue;
                    renderMachines();
                }
                settingsModal.style.display = 'none';
                currentEditingMachine = null;
            } else {
                alert("Please enter 4 hexadecimal digits (0-9, A-F)");
            }
        });

        modalCancel.addEventListener('click', () => {
            settingsModal.style.display = 'none';
            currentEditingMachine = null;
        });

        globalStart.addEventListener('click', () => {
            machines.forEach(machine => {
                if (machine.isOn && !machine.isRunning) {
                    startMachineSimulation(machine.id);
                }
            });
            alert(`Started all active machines!`);
        });

        globalStop.addEventListener('click', () => {
            machines.forEach(machine => {
                stopMachineSimulation(machine.id);
            });
            alert(`Stopped all machines!`);
        });

        globalReset.addEventListener('click', () => {
            if (confirm("Reset ALL machines to default values?")) {
                machines.forEach(machine => {
                    machine.value = "880F";
                    machine.isRunning = false;
                });
                renderMachines();
                alert("All machines reset to default!");
            }
        });

        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                switchPage(currentPage - 1);
            }
        });

        nextPageBtn.addEventListener('click', () => {
            if (currentPage < TOTAL_PAGES) {
                switchPage(currentPage + 1);
            }
        });

        // Initialize application
        function init() {
            renderMachines();
            updateDateTime();
            updatePaginationButtons();
            
            // Setup event delegation for both grids
            setupMachineEventDelegation(machinesGrid1);
            setupMachineEventDelegation(machinesGrid2);
            
            // Auto-start some machines for demo
            setTimeout(() => {
                // Turn on first 4 machines
                [0, 1, 2, 3].forEach(i => {
                    machines[i].isOn = true;
                });
                renderMachines();
            }, 500);
            
            // Update datetime every second
            setInterval(updateDateTime, 1000);
        }

        // Start the application
        init();
    </script>
</body>
</html>